# リベ大総合クリニック 患者分析システム

患者の初診データを分析し、純初診と再初診の推移を可視化するWebアプリケーションです。

## 機能一覧

### 基本機能
- CSVファイルのドラッグ&ドロップアップロード
- 期間指定による分析データのフィルタリング
- 月別の純初診・再初診数の推移グラフ表示
- 地域別の患者分布分析
- 前年・前月比較分析
- 大阪市区別の詳細分析

### 分析機能
- **純初診数**: 新規患者数の集計
- **再初診数**: 既存患者の新症状による受診数
- **純初診率**: 全初診における純初診の割合
- **地域別分析**: 患者の居住地域別の分布
- **期間比較**: 任意の2期間のデータ比較分析

### エクスポート機能
- PDF形式での分析レポート出力
- Excel形式での詳細データ出力

## 使用方法

1. **CSVファイルの準備**
   - 必要な列: 日付、患者番号、初診・再診、患者住所
   - 日付形式: YYYY-MM-DD
   - 初診・再診の値: "初診" または "再診"

2. **データのアップロード**
   - ブラウザでindex.htmlを開く
   - CSVファイルをドラッグ&ドロップまたはクリックして選択

3. **期間の選択**
   - 開始月と終了月を選択
   - 「期間を更新」ボタンをクリック

4. **分析結果の確認**
   - 各タブで異なる視点の分析結果を確認
   - 必要に応じてPDFまたはExcelで出力

## 技術仕様

### 使用ライブラリ
- **Chart.js**: グラフ描画
- **PapaParse**: CSV解析
- **jsPDF**: PDF生成
- **SheetJS (xlsx)**: Excel生成

### ブラウザ要件
- モダンブラウザ（Chrome, Firefox, Safari, Edge）
- JavaScript有効化必須

## データ形式

### CSVファイルの例
```csv
日付,患者番号,初診・再診,患者住所
2024-01-01,100,初診,大阪府大阪市西区北堀江
2024-01-02,101,初診,大阪府大阪市中央区心斎橋
2024-01-03,100,再診,大阪府大阪市西区北堀江
```

### 患者番号の境界判定
- 各月の新規患者は、前月の最大患者番号より大きい番号を持つ
- 純初診: 該当月の境界番号以上の患者番号
- 再初診: 該当月の境界番号未満の患者番号

## インストール

1. リポジトリをクローン
```bash
git clone https://github.com/Yusuke0018/liberalarts.git
cd liberalarts
```

2. ブラウザでindex.htmlを開く
```bash
open index.html
```

## ライセンス

MIT License

## 作成者

リベ大総合クリニック